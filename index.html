<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Importateur et Filtre CSV</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alasql/4.0.0/alasql.min.js"></script>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="container">
        <h1>Importateur et Filtre CSV</h1>

        <div class="import-section">
             <h2>Importer un CSV</h2>
             <input type="file" id="csvFile" accept=".csv">
             <button id="importBtn">Importer</button>
             <div class="loader" id="importLoader"></div>
             <p id="importStatus"></p>
        </div>

        <div class="filter-section" id="filterSection" style="display: none;">
             <h2>Filtrer les Données</h2>
             <div class="filter-tabs"> 
                 <button class="filter-tab active" data-tab="basic">Filtre de Base</button> 
                 <button class="filter-tab" data-tab="sql">Filtre SQL</button> 
             </div>
             <div class="tab-content active" id="basic-tab">
                 <div id="filterControls"></div>
                 <button id="applyFiltersBtn">Appliquer les Filtres</button>
                 <!-- Renamed Reset Button -->
                 <button id="resetFiltersBtn">Réinitialiser Filtres & Groupes</button>

                 <!-- Group By Section -->
                 <div id="groupBySection" style="display: none;">
                     <h3>Grouper par :</h3>
                     <div id="groupByRulesContainer"></div>
                     <button id="addGroupByRuleBtn" type="button">+ Ajouter règle</button>
                     <button id="applyGroupByBtn" type="button">Appliquer Groupes</button>
                     <!-- New Reset Grouping Button -->
                     <button id="resetGroupByBtn" type="button" style="margin-left: 10px;">Retirer Groupes</button>
                 </div>

             </div>
             <div class="tab-content" id="sql-tab">
                 <p>Entrez une requête de type SQL pour filtrer les données :</p>
                 <textarea id="sqlQuery" rows="4" placeholder="Exemple: SELECT * FROM ? WHERE colonne > valeur"></textarea>
                 <button id="executeSqlBtn">Exécuter la Requête</button>
             </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection" style="display: none;">
            <h2>Résultats</h2>
            <div class="results-header">
                <p id="resultStats"></p>
                <div class="pagination-controls">
                     <label for="rowsPerPageSelect">Lignes par page:</label>
                     <select id="rowsPerPageSelect"></select> 
                     <div id="pagination"></div>
                </div>
            </div>
            <div class="export-options">
                <button id="exportCsvBtn">Exporter en CSV</button>
                <button id="exportJsonBtn">Exporter en JSON</button>
            </div>
            <div id="tableContainer" style="overflow-x: auto;">
                 <!-- Le tableau sera généré dynamiquement ici -->
            </div>
        </div>
    </div>

    <script src="global.js"></script>
    <script src="utils.js"></script>
    <script src="import.js"></script>
    <script src="filter.js"></script>
    <!-- Removed sort.js as logic is now in display.js -->
    <script src="sql.js"></script>
    <script src="display.js"></script>
    <script src="export.js"></script>
    <script src="group.js"></script>
    <script src="main.js"></script>
</body>
</html>
